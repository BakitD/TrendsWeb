{% extends "geomap/base.html" %}
{% load staticfiles %}
{% load leaflet_tags %}
{% load geojson_tags %}

{% block headblock %}
	{% leaflet_js %}
	{% leaflet_css %}

	<style>
		.leaflet-container {
			max-width: 90%;
			max-height: 90%;
			width: 1100px;
			height: 570px;
			margin-top: 5px;
		}


		body{
			padding-top: 50px;
			background-image: none;
			background-color: #B0C4DE;
		}
	</style>
{% endblock %}


{% block content %}

	<script type="text/javascript">
		var collection = {{ trends|geojsonfeature:"popupContent"|safe }};
		function onEachFeature(feature, layer) {
		    if (feature.properties && feature.properties.popupContent) {
		      layer.bindPopup(feature.properties.popupContent);
		    }
		}
		function map_init(map, options) {
    			L.geoJson(collection, {onEachFeature: onEachFeature}).addTo(map);
  		}
    	</script>

	
	  <div >
		<div class="container map">
			{% leaflet_map "geomap" callback="window.map_init"%}
		</div>
	  </div>

{% endblock %}






